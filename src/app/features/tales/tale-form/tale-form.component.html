<section class="card vstack">
  <h2>{{ editId ? 'Edit Tale' : 'Add Tale' }}</h2>
  <form (ngSubmit)="save()" #f="ngForm" class="vstack">
    <div class="form-field">
      <label for="title">{{ 'COMMON.TITLE' | t }}</label>
      <input class="input" id="title" name="title" [(ngModel)]="model.title" required/>
    </div>

    <div class="form-field">
      <label for="author">{{ 'COMMON.AUTHOR' | t }}</label>
      <input class="input" id="author" name="author" [(ngModel)]="model.author" required/>
    </div>

    <div class="form-field">
      <label for="isbn">{{ 'TALE.ISBN' | t }}</label>
      <input class="input" id="isbn" name="isbn" [(ngModel)]="model.isbn"/>
    </div>

    <div class="form-field">
      <label for="publishedYear">{{ 'TALE.PUBLISHED_YEAR' | t }}</label>
      <input class="input" id="publishedYear" name="publishedYear" type="number" [(ngModel)]="model.publishedYear"/>
    </div>

    <div class="form-field">
      <label for="coverUrl">{{ 'TALE.COVER_URL' | t }}</label>
      <input class="input" id="coverUrl" name="coverUrl" [(ngModel)]="model.coverUrl"/>
    </div>

    <div class="form-field">
      <label for="tags">Tags (comma separated)</label>
      <input class="input" id="tags" name="tags" [(ngModel)]="model.tags"/>
    </div>

    <div class="form-field">
      <label for="description">{{ 'COMMON.DESCRIPTION' | t }}</label>
      <textarea id="description" name="description" rows="5" [(ngModel)]="model.description"></textarea>
    </div>

    <div class="hstack" style="gap:8px;">
      <button class="btn btn-primary" type="submit" [disabled]="saving || !f.form.valid">
        {{ saving ? (editId ? 'Updating…' : 'Saving…') : (editId ? 'Update' : 'Save') }}
      </button>
      <a class="btn" href="" (click)="$event.preventDefault(); goBack()">{{ 'COMMON.CANCEL' | t }}</a>
    </div>

    @if (error) {
      <p class="error">{{ error }}</p>
    }
  </form>
</section>
